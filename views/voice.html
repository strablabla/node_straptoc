<!DOCTYPE html>

<html>

<meta charset="UTF-8">

<script src="artyom.window.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>

const artyom = new Artyom();
var socket = io.connect();

artyom.initialize({
  lang:'fr-FR',
  continuous:true,
  debug:false,
  listen:true
})

// -------------------------------- go to location function..

function goto(root, name){

      var dic_name =  {
          indexes: [name],
          action: function() {
              location.href = root + name
              }
      }
      return dic_name

}

// -------------------------------- toggle TOC

var dic_toc =  {
        indexes: ['table des matières', 'matières'],
        action: function() {
            //artyom.say("change le toc");
            $('#toc').toggle()
            }
    }
artyom.addCommands(dic_toc); //

// -------------------------------- trigger Notes

var dic_note =  {
        indexes: ['nouvelle note'],
        action: function() {
            socket.emit('new_note', '')
            }
    }

artyom.addCommands(dic_note); //

//----------- Dic voc for goto

socket.on('dic_voc', function(dic) {

      var dic_voc = JSON.parse(dic)
      for (k in dic_voc){                 // keys
          curr_list = dic_voc[k]         // current list
          for (i in curr_list){
              artyom.addCommands(goto(k, curr_list[i])); //
          }
      }

 });



</script>

</html>
